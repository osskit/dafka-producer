version: '2.3'

services:
    producer:
        build: ../
        ports:
            - 6000:6000
        environment:
            - PORT=6000
            - KAFKA_BROKER=kafka:9092
            - ENFORCE_CORRELATION_ID=true
            - CORRELATION_ID_HEADER_KEY=x-correlation-id

    consumer:
        image: osskit/dafka-consumer:1.0.2
        ports:
            - 4001:4001
        environment:
            - KAFKA_BROKER=kafka:9092
            - TOPICS=foo,bar
            - GROUP_ID=consumer_1
            - SENDING_PROTOCOL=http
            - TARGET=target:2000/consume
            - MONITORING_SERVER_PORT=4001
            - ENFORCE_CORRELATION_ID=true
            - CORRELATION_ID_HEADER_KEY=x-correlation-id
